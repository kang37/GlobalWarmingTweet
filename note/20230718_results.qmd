---
title: "Results"
author: "Kang"
format: html
editor: visual
---

## 峰值事件识别

方法和原本类似，不同的仅在第一步。现在的方法简述如下。

（1）在每一年每天推文数基础上，结合每年的用户总数，计算每天每用户推文数（即每天推文数除以当年用户总数）。**将数据按照年份分成10份**，对于每年的数据，在每天每用户推文数基础上，计算出每年的高值线（如90分位数）。

（2）大于该高值线的日期称为高值日期。

（3）若高值日期连续天数大于等于3天，则称为一个事件。

分析结果和原本相同，原因是判断高值日期的标准是分位数，分位数原本的基于每年子数据集中的每日推文总数计算的，而现在是基于每年子数据集中的每日推文强度计算的。每日推文强度的计算方法，如上文所说，是每天推文数除以当年用户总数，而对于每个年份的子数据集，只有一个\"当年用户总数\"。所以虽然分位数的绝对值变化了，越过高值线的日期却不会变化。

所需的每日每十万用户发文数图如下。每日每万用户发文数 = 每日推文总数 / 当年用户总数。

```{r}
tar_load(general_plot_dt)
ggplot(general_plot_dt) + 
  geom_line(aes(date, tw_int)) + 
  labs(x = "Date", y = "Tweet number per 100 thousand users")
```

## 峰值事件分析

同上一版报告。
